{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://raw.githubusercontent.com/EconomicsObservatory/courses/refs/heads/main/datasets/simple/onshore_wind_cleaned.csv"
  },
  "transform": [
    {"calculate": "toString(datum.Year)+'-01-01'", "as": "PYear"},
    {"calculate": "toDate(datum.PYear)", "as": "RYear"},
    {"filter": "datum.Technology=='Technology 1'"},
    {"filter": "datum.Class=='1'"}
  ],
  "layer": [
    {
      "transform": [
        {"filter": "datum.Scenario!='Moderate'"},
        {"pivot": "Scenario", "groupby": ["RYear"], "value": "Value"}
      ],
      "mark": {"type": "area", "opacity": 0.3},
      "encoding": {
        "x": {"field": "RYear", "type": "temporal"},
        "y": {
          "field": "Conservative",
          "type": "quantitative",
          "axis": {"title": ""},
          "scale": {"domain": [3000, 6000]}
        },
        "y2": {
          "field": "Advanced",
          "type": "quantitative",
          "axis": {"title": ""},
          "scale": {"domain": [3000, 6000]}
        }
      }
    },
    {
      "transform": [{"filter": "datum.Scenario=='Moderate'"}],
      "mark": "line",
      "encoding": {
        "x": {
          "field": "RYear",
          "type": "temporal",
          "axis": {"format": "%Y", "title": ""}
        },
        "y": {
          "field": "Value",
          "type": "quantitative",
          "axis": {"title": ""},
          "scale": {"domain": [3000, 6000]}
        },
        "color": {"field": "Scenario", "type": "nominal"}
      }
    }
  ],
  "config": {}
}